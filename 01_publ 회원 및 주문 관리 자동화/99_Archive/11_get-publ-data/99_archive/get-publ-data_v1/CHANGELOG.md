# Changelog

## [1.1.0] - 2024-11-22

### 추가 (Added)
- 멤버 목록 CSV 파일 자동 다운로드 기능
- 다운로드 파일명에 타임스탬프 자동 추가 기능
- 다운로드 중복 방지 메커니즘

### 개선 (Improved)
- **다운로드 파일 중복 방지**: 파일명에 타임스탬프를 추가하여 같은 파일을 여러 번 다운로드해도 덮어쓰기되지 않도록 개선
  - 기존: `All member list_251122.csv` (덮어쓰기 발생)
  - 개선: `All member list_251122_2024-11-22T13-45-30.csv` (고유 파일명 생성)

### 해결된 문제 (Fixed Issues)

#### 1. 다운로드 파일 덮어쓰기 문제
- **문제**: "All Member download (CSV)" 버튼을 여러 번 클릭하면 새로운 파일이 생성되지 않고 기존 파일만 업데이트됨
- **원인 분석**:
  - `download.suggestedFilename()` 메서드가 서버에서 제공하는 원본 파일명을 그대로 반환
  - 서버가 항상 같은 파일명(`All member list_251122.csv`)을 제공
  - `download.saveAs(filePath)` 메서드가 같은 경로에 저장할 때 기존 파일을 덮어쓰기
  - 파일명에 고유 식별자(타임스탬프)가 없어서 중복 방지 불가
- **해결**:
  - 파일명에 타임스탬프를 자동으로 추가하는 로직 구현
  - `YYYY-MM-DDTHH-MM-SS` 형식의 타임스탬프를 파일명에 포함
  - 각 다운로드마다 고유한 파일명 생성으로 덮어쓰기 방지
- **코드 위치**: `login.js` 488-504번째 줄

### 문서화 (Documentation)
- README.md에 다운로드 기능 및 중복 방지 설명 추가
- 문제 해결 섹션에 다운로드 파일 덮어쓰기 문제 해결 방법 추가
- 프로젝트 구조에 `downloads/` 폴더 정보 추가

### 알려진 제한사항 (Known Limitations)
- 타임스탬프 형식이 `YYYY-MM-DDTHH-MM-SS`로 길어서 파일명이 길어질 수 있음
- 향후 더 간단한 형식(`YYYYMMDD_HHMMSS`)으로 개선 예정

---

## [1.0.0] - 2024-11-22

### 추가 (Added)
- Playwright 기반 publ.biz 자동 로그인 스크립트 구현
- `.env` 파일을 통한 환경변수 관리
- 자동 로그인 성공/실패 감지 기능
- 상세한 디버깅 로그 출력
- 오류 발생 시 자동 스크린샷 저장

### 기능 (Features)
- **자동 로그인**: publ.biz 콘솔에 자동으로 로그인
- **환경변수 지원**: `.env` 파일 또는 명령줄 인자로 로그인 정보 입력
- **에러 감지**: 로그인 실패 시 에러 메시지 자동 감지 및 출력
- **빠른 실행**: 최적화된 대기 시간으로 빠른 로그인 처리
- **브라우저 확인**: 로그인 후 30초간 브라우저를 열어두어 수동 확인 가능

### 기술 스택 (Tech Stack)
- **Playwright**: 브라우저 자동화
- **Node.js**: JavaScript 런타임
- **dotenv**: 환경변수 관리

### 해결된 문제 (Fixed Issues)

#### 1. 브라우저 실행 오류
- **문제**: macOS Crashpad 권한 문제로 브라우저 실행 실패
- **해결**: `--disable-crash-reporter`, `--disable-crashpad` 옵션 추가

#### 2. 페이지 로딩 타임아웃
- **문제**: `networkidle` 대기 조건으로 인한 타임아웃
- **해결**: `domcontentloaded`로 변경하여 페이지 로딩 안정화

#### 3. 환경변수 특수문자 처리
- **문제**: `.env` 파일에서 `#` 문자가 주석으로 인식되어 비밀번호 일부 손실
- **해결**: 비밀번호를 따옴표(`"`)로 감싸서 특수문자 보호
- **예시**: `PUBL_PASSWORD="YaxBA#W#C!8Oz1"`

#### 4. 입력 필드 값 클리어 오류
- **문제**: `element.clear()` 메서드가 존재하지 않음
- **해결**: `Meta+A` (전체 선택) + `Backspace`로 기존 값 삭제

#### 5. 비밀번호 입력 오류
- **문제**: `type()` 메서드 사용 시 특수문자 입력 실패
- **해결**: `fill()` 메서드로 변경하여 안정적인 입력 처리

#### 6. 실행 속도 개선
- **문제**: 과도한 대기 시간으로 인한 느린 실행 속도
- **해결**: 
  - `slowMo: 500ms` → `100ms`
  - 각 단계별 대기 시간 최적화 (1000ms → 300ms)
  - 필드 입력 대기 시간 단축 (200ms → 50-100ms)

### 성능 개선 (Performance)
- 로그인 프로세스 전체 실행 시간: ~15초 → ~8초 (약 50% 개선)

### 보안 (Security)
- `.env` 파일을 `.gitignore`에 추가하여 민감한 정보 보호
- 로그 출력 시 이메일/비밀번호 일부만 표시 (마스킹 처리)

### 문서화 (Documentation)
- README.md: 설치 및 사용 가이드
- CHANGELOG.md: 개발 과정 및 변경 사항 기록
- 코드 내 상세한 주석 추가

### 알려진 제한사항 (Known Limitations)
- macOS 환경에서만 테스트됨
- Chromium 브라우저만 지원
- 로그인 후 브라우저를 수동으로 닫으면 오류 발생 (정상 동작)

### 향후 계획 (Future Plans)
- [ ] headless 모드 지원 옵션 추가
- [ ] 로그인 후 자동 작업 수행 기능
- [ ] 다중 계정 로그인 지원
- [ ] 로그인 세션 저장 및 재사용
- [ ] Windows/Linux 환경 테스트 및 지원

---

## 버전 관리 규칙

이 프로젝트는 [Semantic Versioning](https://semver.org/)을 따릅니다:
- **MAJOR**: 호환되지 않는 API 변경
- **MINOR**: 하위 호환성을 유지하는 기능 추가
- **PATCH**: 하위 호환성을 유지하는 버그 수정

## 개발 타임라인

### 2024-11-22
- **12:00-12:10**: 프로젝트 초기 설정 및 Playwright 설치
- **12:10-12:15**: 페이지 구조 분석 및 선택자 확인
- **12:15-12:20**: 기본 로그인 스크립트 작성
- **12:20-12:25**: 브라우저 실행 오류 해결 (Crashpad 문제)
- **12:25-12:30**: 페이지 로딩 타임아웃 문제 해결
- **12:30-12:35**: 환경변수 특수문자 처리 문제 해결
- **12:35-12:40**: 입력 필드 처리 로직 개선
- **12:40-12:45**: 실행 속도 최적화
- **12:45-12:50**: 문서화 작업

